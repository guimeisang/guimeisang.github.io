---
title: react编程思想
date: 2017-08-15 09:47:02
tags: react 入门思考
---

在我的理解中，React是JavaScript构建大型，高性能Web应用的最佳选择。    

React很重要的部分是思考如何构建应用程序。

<!--more-->

首先我们会有一个JSON API。并且从UI那边得到UI图稿。   

### 步骤1: 将UI拆解到组件层次结构中    
> 就是将需求文档，拿到的时候，对其进行分解。其中要遵循“单一职责原则”。即在理想情况下，一个组件只处理一件事。


如下组件结构：
- a
    - a-1
    - a-2
    - a-3
        - a-3-1
        - a-3-2
        - a-3-3

### 步骤2: 用react构建一个静态版本
> 有了你的组件层次结构，就可以去实现静态app。注意在实现的过程中只先实现一个渲染ui无交互效果的版本。并且不能在过程中使用state，因为要知道state只能用于交互中。用Props，组件的属性进行传值就好。

### 确定UI state的最小但是完整的表示  
> 如果说你想你的app能够交互，那么你需要触发底层的数据模型。React通过state可以实现。

具体策略就是：
1. 先将所有可能的数据list出来（新手推荐）；
2. 分析每一个数据，按照下面三个标准来确定是不是state；
    * 是否可以通过父组件Props传值；
    * 是否永远不发生变化；
    * 是否可以通过state，props计算出来；
3. 最终确定state（状态）是哪几个；  

### 确定state(状态)在哪个组件中   
> React单向数据流在层级中自上而下，需要判断出状态属于哪个组件。

具体策略：  
1. 确定每个需要基于state(状态)渲染的组件；
2. 找出公共的父组件；
3. 如果找不出公共父组件，可以创建一个简单的新组件保留这个state(状态)  


### 添加反向数据流  
> app已经有Props(属性)和state(状态)沿着层次结构向下传播，但是我们希望一下交互也可以改变state(状态)；   
但是组件只能更新自己的state（状态），所以我们应该在公共父组件那边去更新，然后将传递到改组件中；在公共父组件中使用下面代码：

```
handleFilterTextInput(filterText) {
    this.setState({
        filterText: filterText
    })
}
```

### 总结
有的时候你可能会多写几行代码，但是切记阅读代码的重要性远远高于写代码，模块化，结构清晰的代码最利于阅读，特别是项目比较大的时候。
